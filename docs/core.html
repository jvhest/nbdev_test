---

title: functions


keywords: fastai
sidebar: home_sidebar



nb_path: "nbs/00_core.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/00_core.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="extract_field" class="doc_header"><code>extract_field</code><a href="https://github.com/jvhest/nbdev_test/tree/master/nbdev_test/functions.py#L15" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>extract_field</code>(<strong><code>buffer</code></strong>:<code>str</code>, <strong><code>query</code></strong>:<code>str</code>)</p>
</blockquote>
<p>Buffer is an xml string. Search for :query: in buffer.
The query should be a part of opening tag starting
with &lt; like &lt;dc:title.
If found the containing value of the tag will be returned.
If not found empty string is returned.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="read_opf_file" class="doc_header"><code>read_opf_file</code><a href="https://github.com/jvhest/nbdev_test/tree/master/nbdev_test/functions.py#L37" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>read_opf_file</code>(<strong><code>epub_path</code></strong>:<code>str</code>)</p>
</blockquote>
<p>Read and return the content of the <em>.opf file in epub "file-system".
If no </em>.opf file in epub return empty string.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">epub_path</span> <span class="o">=</span> <span class="s2">&quot;/home/jvh/Public/naar_calibre/ict/divers/bb-ai.for.good.epub&quot;</span>
<span class="n">content</span> <span class="o">=</span> <span class="n">read_opf_file</span><span class="p">(</span><span class="n">epub_path</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">content</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">epub_path</span> <span class="o">=</span> <span class="s2">&quot;/home/jvh/Public/naar_calibre/ict/divers/bb-ai.for.good.epub&quot;</span>
<span class="n">content</span> <span class="o">=</span> <span class="n">read_opf_file</span><span class="p">(</span><span class="n">epub_path</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">content</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_title" class="doc_header"><code>get_title</code><a href="https://github.com/jvhest/nbdev_test/tree/master/nbdev_test/functions.py#L60" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_title</code>(<strong><code>buffer</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_author" class="doc_header"><code>get_author</code><a href="https://github.com/jvhest/nbdev_test/tree/master/nbdev_test/functions.py#L64" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_author</code>(<strong><code>buffer</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_date" class="doc_header"><code>get_date</code><a href="https://github.com/jvhest/nbdev_test/tree/master/nbdev_test/functions.py#L71" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_date</code>(<strong><code>buffer</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="create_book_title" class="doc_header"><code>create_book_title</code><a href="https://github.com/jvhest/nbdev_test/tree/master/nbdev_test/functions.py#L79" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>create_book_title</code>(<strong><code>buffer</code></strong>:<code>str</code>)</p>
</blockquote>
<p>Returns a new name for the epub based on title, author and date.
If title cannot be found then empty string will be returned</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_all_epubs" class="doc_header"><code>get_all_epubs</code><a href="https://github.com/jvhest/nbdev_test/tree/master/nbdev_test/functions.py#L107" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_all_epubs</code>(<strong><code>folder</code></strong>:<code>str</code>)</p>
</blockquote>
<p>returns list with abs. path to all epubs in folder</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="generate_epub_name" class="doc_header"><code>generate_epub_name</code><a href="https://github.com/jvhest/nbdev_test/tree/master/nbdev_test/functions.py#L120" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>generate_epub_name</code>(<strong><code>epub_path</code></strong>:<code>str</code>)</p>
</blockquote>
<p>generate epub name for :epub_path: based on content of .opf file</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">epub_path</span> <span class="o">=</span> <span class="s2">&quot;/home/jvh/Public/naar_calibre/ict/divers/bb-ai.for.good.epub&quot;</span>
<span class="n">new_name</span> <span class="o">=</span> <span class="n">generate_epub_name</span><span class="p">(</span><span class="n">epub_path</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">new_name</span> <span class="o">==</span> <span class="s2">&quot;Redesigning AI - Daron Acemoglu[2021].epub&quot;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="move_epub" class="doc_header"><code>move_epub</code><a href="https://github.com/jvhest/nbdev_test/tree/master/nbdev_test/functions.py#L137" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>move_epub</code>(<strong><code>epub_path</code></strong>:<code>str</code>, <strong><code>backup_folder</code></strong>:<code>str</code>)</p>
</blockquote>
<p>find new book title for :epub: in :folder: and copy
the epubs with new book title to :backup_folder:</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="move_all_epubs" class="doc_header"><code>move_all_epubs</code><a href="https://github.com/jvhest/nbdev_test/tree/master/nbdev_test/functions.py#L174" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>move_all_epubs</code>(<strong><code>source_folder</code></strong>:<code>str</code>, <strong><code>backup_folder</code></strong>:<code>str</code>)</p>
</blockquote>
<p>create new book title for first :count: epubs in :folder: and copy
the epubs with new book title to :backup_folder:</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">my_path</span> <span class="o">=</span> <span class="s2">&quot;/home/jvh/Public/naar_calibre/ict/divers&quot;</span>
<span class="c1"># move_all_epubs(my_path, my_path + &quot;/temp&quot;)</span>
<span class="c1"># move_epub(my_path + &quot;/bb-ai.for.good.epub&quot;, my_path + &quot;/temp&quot;)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

</div>


